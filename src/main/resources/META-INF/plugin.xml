<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.github.yelog.i18nhelper</id>
    <name>I18n Helper</name>
    <vendor url="https://github.com/yelog">yelog</vendor>

    <description><![CDATA[
    Intelligent i18n (internationalization) helper for JavaScript/TypeScript projects.
    <br><br>
    Features:
    <ul>
        <li>Auto-detect i18n frameworks: vue-i18n, react-i18next, i18next, next-intl, @nuxtjs/i18n, react-intl</li>
        <li>Inline translation preview at t() / $t() calls</li>
        <li>Cmd+Click navigation to translation files</li>
        <li>Find Usages for translation keys</li>
        <li>Cross-language navigation between locale files</li>
    </ul>
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>JavaScript</depends>

    <resource-bundle>messages.I18nBundle</resource-bundle>

    <applicationListeners>
        <!-- Dynamic plugin loading listener - no restart required -->
        <listener class="com.github.yelog.i18nhelper.startup.I18nDynamicPluginListener"
                  topic="com.intellij.ide.plugins.DynamicPluginListener"/>
    </applicationListeners>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Project Service for caching translations -->
        <projectService serviceImplementation="com.github.yelog.i18nhelper.service.I18nCacheService"/>

        <!-- Startup activity to initialize cache -->
        <postStartupActivity implementation="com.github.yelog.i18nhelper.startup.I18nProjectActivity"/>

        <!-- Goto declaration handler for Cmd+Click on folded regions -->
        <gotoDeclarationHandler implementation="com.github.yelog.i18nhelper.navigation.I18nGotoDeclarationHandler" order="first"/>

        <!-- Documentation provider for Quick Definition/Documentation on i18n keys -->
        <lang.documentationProvider language="JavaScript"
                                    implementationClass="com.github.yelog.i18nhelper.documentation.I18nDocumentationProvider"
                                    order="first"/>
        <lang.documentationProvider language="TypeScript"
                                    implementationClass="com.github.yelog.i18nhelper.documentation.I18nDocumentationProvider"
                                    order="first"/>
        <lang.documentationProvider language="Vue"
                                    implementationClass="com.github.yelog.i18nhelper.documentation.I18nDocumentationProvider"
                                    order="first"/>
        <lang.documentationProvider language="TypeScript JSX"
                                    implementationClass="com.github.yelog.i18nhelper.documentation.I18nDocumentationProvider"
                                    order="first"/>

        <!-- Inlay hints for showing translations inline -->
        <codeInsight.inlayProvider language="JavaScript"
                                   implementationClass="com.github.yelog.i18nhelper.hint.I18nInlayHintsProvider"/>
        <codeInsight.inlayProvider language="TypeScript"
                                   implementationClass="com.github.yelog.i18nhelper.hint.I18nInlayHintsProvider"/>
        <codeInsight.inlayProvider language="Vue"
                                   implementationClass="com.github.yelog.i18nhelper.hint.I18nInlayHintsProvider"/>
        <codeInsight.inlayProvider language="TypeScript JSX"
                                   implementationClass="com.github.yelog.i18nhelper.hint.I18nInlayHintsProvider"/>
        
        <!-- Reference contributor for Cmd+Click navigation -->
        <psi.referenceContributor language="JavaScript"
                                  implementation="com.github.yelog.i18nhelper.reference.I18nReferenceContributor"/>
        <psi.referenceContributor language="TypeScript"
                                  implementation="com.github.yelog.i18nhelper.reference.I18nReferenceContributor"/>
        <psi.referenceContributor language="Vue"
                                  implementation="com.github.yelog.i18nhelper.reference.I18nReferenceContributor"/>
        <psi.referenceContributor language="TypeScript JSX"
                                  implementation="com.github.yelog.i18nhelper.reference.I18nReferenceContributor"/>
        
        <!-- Line marker for cross-language navigation in translation files -->
        <codeInsight.lineMarkerProvider language="JSON"
                                        implementationClass="com.github.yelog.i18nhelper.marker.I18nLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="yaml"
                                        implementationClass="com.github.yelog.i18nhelper.marker.I18nLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="JavaScript"
                                        implementationClass="com.github.yelog.i18nhelper.marker.I18nLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="TypeScript"
                                        implementationClass="com.github.yelog.i18nhelper.marker.I18nLineMarkerProvider"/>

        <lang.foldingBuilder language="JavaScript"
                             implementationClass="com.github.yelog.i18nhelper.folding.I18nFoldingBuilder"/>
        <lang.foldingBuilder language="TypeScript"
                             implementationClass="com.github.yelog.i18nhelper.folding.I18nFoldingBuilder"/>
        <lang.foldingBuilder language="Vue"
                             implementationClass="com.github.yelog.i18nhelper.folding.I18nFoldingBuilder"/>
        <lang.foldingBuilder language="TypeScript JSX"
                             implementationClass="com.github.yelog.i18nhelper.folding.I18nFoldingBuilder"/>

        <projectConfigurable id="i18n.helper.settings"
                             displayName="I18n Helper"
                             instance="com.github.yelog.i18nhelper.settings.I18nSettingsConfigurable"
                             nonDefaultProject="true"/>
        
        <!-- File listener for cache invalidation -->
        <vfs.asyncListener implementation="com.github.yelog.i18nhelper.listener.I18nFileListener"/>

        <!-- Find Usages support for i18n keys in translation files -->
        <referencesSearch implementation="com.github.yelog.i18nhelper.reference.I18nUsageSearcher"/>

        <!-- Search Everywhere tab for i18n translations -->
        <searchEverywhereContributor implementation="com.github.yelog.i18nhelper.searcheverywhere.I18nSearchEverywhereContributorFactory"/>
    </extensions>

    <actions>
        <action id="I18nHelper.SwitchLocale"
                class="com.github.yelog.i18nhelper.action.I18nSwitchLocaleAction"
                text="Switch I18n Display Language"
                description="Cycle i18n display language"/>
        <action id="I18nHelper.ShowTranslationsPopup"
                class="com.github.yelog.i18nhelper.action.I18nTranslationsPopupAction"
                text="Show I18n Translations"
                description="Show translations for current i18n key"/>
        <action id="I18nHelper.CopyKey"
                class="com.github.yelog.i18nhelper.action.I18nCopyKeyAction"
                text="Copy I18n Key"
                description="Copy current i18n key"/>
    </actions>
</idea-plugin>
